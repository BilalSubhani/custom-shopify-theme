
<div class="search-page">
  <div class="search-header">
    <h1 class="search-title">Search Results</h1>
    <p class="search-results-count">
      {% if search.results_count == 0 %}
        No results found for "{{ search.terms }}"
      {% else %}
        {{ search.results_count }} results for "{{ search.terms }}"
      {% endif %}
    </p>
  </div>

  <form action="{{ routes.search_url }}" method="get" class="search-form-large">
    <input type="hidden" name="type" value="product">
    <input type="text" name="q" placeholder="Search products..." value="{{ search.terms }}">
    <button type="submit">Search</button>
  </form>

  {% if search.results_count > 0 %}
    <div class="search-filters">
      <div class="filter-group">
        <label class="filter-label">Sort by:</label>
        <select class="filter-select" name="sort_by" onchange="this.form.submit()">
          <option value="relevance" {% if search.sort_by == 'relevance' %}selected{% endif %}>Relevance</option>
          <option value="price-ascending" {% if search.sort_by == 'price-ascending' %}selected{% endif %}>Price: Low to High</option>
          <option value="price-descending" {% if search.sort_by == 'price-descending' %}selected{% endif %}>Price: High to Low</option>
          <option value="title-ascending" {% if search.sort_by == 'title-ascending' %}selected{% endif %}>Alphabetically: A-Z</option>
          <option value="title-descending" {% if search.sort_by == 'title-descending' %}selected{% endif %}>Alphabetically: Z-A</option>
        </select>
      </div>
    </div>

    <div class="search-results-grid">
      {% for item in search.results %}
        {% if item.object_type == 'product' %}
          <div class="product-card">
            <div class="product-header">
              <h2><a href="{{ item.url }}">{{ item.title }}</a></h2>
              <p class="vendor">By {{ item.vendor }}</p>
            </div>

            <div class="product-images">
              <div class="featured-image">
                <img src="{{ item.featured_image | img_url: '200x' }}" alt="{{ item.title }}" loading="lazy">
              </div>
            </div>

            <div class="product-details">
              <div class="price-section">
                <p class="price">{{ item.price | money }}</p>
                {% if item.compare_at_price > item.price %}
                  <p class="compare-price">{{ item.compare_at_price | money }}</p>
                  <p class="savings">Save {{ item.compare_at_price | minus: item.price | money }}</p>
                {% endif %}
              </div>

              {% if item.description != blank %}
                <div class="description-section">
                  <div class="description">{{ item.description | strip_html | truncatewords: 30 }}</div>
                </div>
              {% endif %}
            </div>
          </div>
        {% endif %}
      {% endfor %}
    </div>

    {% if paginate.pages > 1 %}
      <div class="pagination">
        {{ paginate | default_pagination }}
      </div>
    {% endif %}

  {% else %}
    <div class="no-results">
      <h2 class="no-results-title">No results found</h2>
      <p class="no-results-text">Try checking your spelling or use more general terms</p>
      
      {% if collections.size > 0 %}
        <div class="search-categories">
          <h3>Popular Categories</h3>
          <div class="category-list">
            {% for collection in collections limit: 6 %}
              <div class="category-item">
                <a href="{{ collection.url }}">{{ collection.title }}</a>
              </div>
            {% endfor %}
          </div>
        </div>
      {% endif %}
    </div>
  {% endif %}
</div> 